/* This file was generated by ODB, object-relational mapping (ORM)
 * compiler for C++.
 */

IF OBJECT_ID('relation_employee_projects', 'U') IS NOT NULL
  DROP TABLE [relation_employee_projects];
GO

IF OBJECT_ID('relation_employee', 'U') IS NOT NULL
  DROP TABLE [relation_employee];
GO

IF OBJECT_ID('relation_project', 'U') IS NOT NULL
  DROP TABLE [relation_project];
GO

IF OBJECT_ID('relation_employer', 'U') IS NOT NULL
  DROP TABLE [relation_employer];
GO

CREATE TABLE [relation_employer] (
  [name] VARCHAR(256) NOT NULL PRIMARY KEY);
GO

CREATE TABLE [relation_project] (
  [name] VARCHAR(256) NOT NULL PRIMARY KEY);
GO

CREATE TABLE [relation_employee] (
  [id] BIGINT NOT NULL PRIMARY KEY IDENTITY,
  [first] VARCHAR(512) NOT NULL,
  [last] VARCHAR(512) NOT NULL,
  [employer] VARCHAR(256) NOT NULL
  /*
  CONSTRAINT [relation_employee_employer_fk]
    FOREIGN KEY ([employer])
    REFERENCES [relation_employer] ([name])
  */);
GO

CREATE TABLE [relation_employee_projects] (
  [object_id] BIGINT NOT NULL,
  [value] VARCHAR(256) NOT NULL,
  CONSTRAINT [relation_employee_projects_object_id_fk]
    FOREIGN KEY ([object_id])
    REFERENCES [relation_employee] ([id])
    ON DELETE CASCADE
  /*
  CONSTRAINT [relation_employee_projects_value_fk]
    FOREIGN KEY ([value])
    REFERENCES [relation_project] ([name])
  */);
GO

CREATE INDEX [object_id_i]
  ON [relation_employee_projects] ([object_id]);
GO

